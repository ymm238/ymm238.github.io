<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>kernel代码阅读生产力 -- vim plug、Cscope | Ymm's 博客</title>
<meta name=keywords content="C"><meta name=description content="  Vim 是一个Linux上功能强大的文本编辑器，通过安装插件，你可以将Vim打造成一个功能齐全的IDE。vim-plug 是一个轻量级且易于使用的插件管理器，能够帮助用户轻松安装、更新和删除插件。本文将介绍如何在Linux系统上安装和使用 vim-plug 来管理你的 Vim 插件。本人vim配置可见vimrc。使用vim相关插件配合Cscope看内核代码将流畅起飞！"><meta name=author content="ymm"><link rel=canonical href=https://ymm238.github.io/posts/vim_plug/><meta name=google-site-verification content="YMM's BLOG"><meta name=yandex-verification content="YMM's BLOG"><meta name=msvalidate.01 content="YMM's BLOG"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://ymm238.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://ymm238.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://ymm238.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://ymm238.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://ymm238.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://ymm238.github.io/posts/vim_plug/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="kernel代码阅读生产力 -- vim plug、Cscope"><meta property="og:description" content="  Vim 是一个Linux上功能强大的文本编辑器，通过安装插件，你可以将Vim打造成一个功能齐全的IDE。vim-plug 是一个轻量级且易于使用的插件管理器，能够帮助用户轻松安装、更新和删除插件。本文将介绍如何在Linux系统上安装和使用 vim-plug 来管理你的 Vim 插件。本人vim配置可见vimrc。使用vim相关插件配合Cscope看内核代码将流畅起飞！"><meta property="og:type" content="article"><meta property="og:url" content="https://ymm238.github.io/posts/vim_plug/"><meta property="og:image" content="https://ymm238.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-13T09:40:28+00:00"><meta property="article:modified_time" content="2025-03-13T09:40:28+00:00"><meta property="og:site_name" content="ymm"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ymm238.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="kernel代码阅读生产力 -- vim plug、Cscope"><meta name=twitter:description content="  Vim 是一个Linux上功能强大的文本编辑器，通过安装插件，你可以将Vim打造成一个功能齐全的IDE。vim-plug 是一个轻量级且易于使用的插件管理器，能够帮助用户轻松安装、更新和删除插件。本文将介绍如何在Linux系统上安装和使用 vim-plug 来管理你的 Vim 插件。本人vim配置可见vimrc。使用vim相关插件配合Cscope看内核代码将流畅起飞！"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ymm238.github.io/posts/"},{"@type":"ListItem","position":2,"name":"kernel代码阅读生产力 -- vim plug、Cscope","item":"https://ymm238.github.io/posts/vim_plug/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"kernel代码阅读生产力 -- vim plug、Cscope","name":"kernel代码阅读生产力 -- vim plug、Cscope","description":" Vim 是一个Linux上功能强大的文本编辑器，通过安装插件，你可以将Vim打造成一个功能齐全的IDE。vim-plug 是一个轻量级且易于使用的插件管理器，能够帮助用户轻松安装、更新和删除插件。本文将介绍如何在Linux系统上安装和使用 vim-plug 来管理你的 Vim 插件。本人vim配置可见vimrc。使用vim相关插件配合Cscope看内核代码将流畅起飞！\n","keywords":["C"],"articleBody":" Vim 是一个Linux上功能强大的文本编辑器，通过安装插件，你可以将Vim打造成一个功能齐全的IDE。vim-plug 是一个轻量级且易于使用的插件管理器，能够帮助用户轻松安装、更新和删除插件。本文将介绍如何在Linux系统上安装和使用 vim-plug 来管理你的 Vim 插件。本人vim配置可见vimrc。使用vim相关插件配合Cscope看内核代码将流畅起飞！\n安装vim-plug 对于Linux/Macos系统执行以下命令本地安装vim-plug插件。\ncurl -fLo ~/.vim/autoload/plug.vim --create-dirs \\ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim 配置vim-plug 安装完成后，你需要在.vimrc文件中配置vim-plug。打开~/.vimrc，通过如下方式配置可用插件：\ncall plug#begin('~/.vim/plugged') \" 在这里添加你的插件 \" 例如： Plug 'scrooloose/nerdtree' \" 文件浏览器 Plug 'tpope/vim-fugitive' \" Git 集成 Plug 'vim-airline/vim-airline' \" 状态栏美化 call plug#end() call plug#begin(’~/.vim/plugged’)：指定插件安装的目录。 Plug ‘插件作者/插件名’：添加你想要的插件。你可以在Vim Awesome上找到许多流行的插件。 call plug#end()：当前环境所使用的插件列表的结束标志。 “：vim配置文件中使用单个双引号表示注释。 插件安装 保存.vimrc文件后，重新启动Vim并运行以下命令来安装插件：\n:PlugInstall 该命令将自动下载并安装你在.vimrc中配置的所有插件。\n插件需要从github下载，有的时候可能因为网络原因导致下载失败。\n插件更新 以下命令更新已安装的插件\n:PlugUpdate 插件删除 如果你想删除某个插件，只需从.vimrc中移除相应的Plug行，然后运行以下命令：\n:PlugClean 其他命令 :PlugStatus：查看插件的安装状态。 :PlugUpgrade：升级 vim-plug 本身。 常用Vim插件清单 1. 文件导航与管理 ​NERDTree 功能：侧边栏文件浏览器，支持目录树和文件操作。 仓库：preservim/nerdtree 配置实例： Plug 'preservim/nerdtree' \" 快捷键：F7 打开/关闭 NERDTree （可随个人习惯配置） map \u003cF7\u003e :NERDTreeToggle \u003cCR\u003e tagbar 功能：在侧边栏展示当前文件的代码结构（如函数、类、变量等）。 仓库：preservim/tagbar 配置实例 Tagbar依赖ctags工具，执行以下命令apt install universal-ctags/yum install ctags安装ctag\nPlug 'preservim/tagbar' nmap \u003cF8\u003e :TagbarToggle\u003cCR\u003e \" 自动聚焦到 Tagbar 窗口 let g:tagbar_autofocus = 1 \" 自动更新标签（文件保存时） let g:tagbar_autoupdate = 1 \" 窗口宽度 let g:tagbar_width = 30 CtrlP 功能：快速定位文件、缓冲区（Buffer）、最近打开的文件（MRU）或目录。 仓库：ctrlpvim/ctrlp.vim 配置实例： Plug 'ctrlpvim/ctrlp.vim' 2. 界面美化 vim-airline 功能：状态栏美化，显示模式、文件信息、Git 状态等。 仓库：vim-airline/vim-airline 搭配：可安装主题插件如 vim-airline-themes。 配置示例： Plug 'vim-airline/vim-airline' Plug 'vim-airline/vim-airline-themes' let g:airline#extensions#tabline#enabled = 1 \" 启用顶部缓冲区标签栏 let g:airline#extensions#tabline#formatter = 'unique_tail' \" 标签命名格式 let g:airline#extensions#tabline#buffer_nr_show = 1 let g:airline_theme = 'gruvbox' \" 主题名称 gruvbox 功能：经典复古配色方案，护眼且高对比度。 仓库：morhetz/gruvbox 配置示例： Plug 'morhetz/gruvbox' colorscheme gruvbox \" 在 .vimrc 中设置主题 set background=dark \" 或 light 3. 代码编辑增强 vim-polyglot 功能：支持 100+ 语言的语法高亮和缩进规则。 仓库：sheerun/vim-polyglot 配置示例： Plug 'sheerun/vim-polyglot' ​auto-pairs 功能：自动补全括号、引号等符号。 仓库：jiangmiao/auto-pairs 配置示例： Plug 'jiangmiao/auto-pairs' ​nerdcommenter 功能：快速注释/取消注释代码块。 仓库：preservim/nerdcommenter 快捷键：默认 Ctrl+/（需自定义）。 配置示例： Plug 'preservim/nerdcommenter' map \u003cC-_\u003e \u003cPlug\u003eNERDCommenterToggle \" Ctrl+/ 切换注释 4. Git 集成 vim-fugitive 功能：Git 命令集成（提交、分支管理、diff 等）。 仓库：tpope/vim-fugitive 快捷键：:G status、:G commit 等。 配置示例： Plug 'tpope/vim-fugitive' vim-gitgutter\n功能：在行号旁显示 Git 变更状态（增/删/改）。\n仓库：airblade/vim-gitgutter 配置示例： Plug 'airblade/vim-gitgutter' 目前本人主要使用vim阅读内核代码，开发使用的其他IDE，所以未添加LSP相关插件\nvim plug一般配置 vim plug一般配置如下\nset nocompatible \"vim比vi支持更多的功能，如showcmd，避免冲突和副作用，最好关闭兼容 set encoding=utf-8 \"使用utf-8编码 set number \"显示行号 set showcmd \"显示输入命令 set cursorline \"显示当前行 set hlsearch \"显示高亮搜索 nnoremap \u003cF4\u003e :nohlsearch\u003cCR\u003e \"按 F4 键取消高亮显示 set incsearch set history=100 \"默认指令记录是20 \"set ruler \"显示行号和列号（默认打开） set pastetoggle=\u003cF3\u003e \"F3快捷键于paste模式与否之间转化，防止自动缩进 set helplang=cn \"设置为中文帮助文档,需下载并配置之后才生效 set tabstop=4 \"设置tab长度为4 set shiftwidth=4 \"设置自动对齐的缩进级别 set cindent set smartindent \"改进版的cindent,自动识别以#开头的注释，不进行换行 set autoindent \"autoindent配合下面一条命令根据不同语言类型进行不同的缩进操 filetype plugin indent on set nowrap Cscope Cscope 是一款专注于C/C++代码的静态分析工具，提供高效的代码导航功能（如查找函数定义、调用关系、符号引用等）。它通过生成代码数据库，支持快速检索大型项目中的代码结构，尤其适合 Linux 内核等复杂项目。与ctags相比，Cscope 支持更丰富的查询类型，且能与Vim等编辑器深度集成。\n​核心优势： 支持多种代码检索模式（函数定义、调用关系、符号出现位置等）。 高效处理大型代码库（如 Linux 内核）。 与编辑器无缝集成，提升代码阅读效率。 Cscope安装 # Debian/Ubuntu sudo apt install cscope # CentOS/RHEL sudo yum install cscope ​生成代码数据库 生成文件列表 进入项目根目录，生成包含所有代码文件的列表（支持递归子目录）： # 递归查找 C/C++/头文件 find . -name \"*.c\" -o -name \"*.cpp\" -o -name \"*.h\" \u003e cscope.files ​2. 生成数据库 执行以下命令基于cscope.files生成数据库：\ncscope -Rbq -R：递归目录建立索引。 -b：仅生成数据库，不启动交互界面。 -q：生成加速索引（大项目必备）。 生成的文件：\ncscope.out：主数据库。 cscope.in.out 和 cscope.po.out：加速索引文件。 ​Vim 集成配置 \" 自动加载数据库 if filereadable(\"cscope.out\") \u0026\u0026 !cscope_connection() cs add cscope.out endif 基本用法 vim中执行:cs help命令查看Cscope的基本用法。Cscope常用查询命令如下。\n:cs f \u003cquery_type\u003e \u003csymbol\u003e query_type 说明 s 查找符号symbol出现位置 g 查找定义位置 c 查找调用该函数的位置 t 查找文本字符串 由于函数调用层级深，且宏和头文件嵌套复杂，Cscope可以快速且精准导航，直达关键逻辑，通过调用链和符号引用，理清代码依赖关系。\n","wordCount":"2557","inLanguage":"zh-cn","image":"https://ymm238.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-03-13T09:40:28Z","dateModified":"2025-03-13T09:40:28Z","author":{"@type":"Person","name":"ymm"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ymm238.github.io/posts/vim_plug/"},"publisher":{"@type":"Organization","name":"Ymm's 博客","logo":{"@type":"ImageObject","url":"https://ymm238.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ymm238.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://ymm238.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ymm238.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ymm238.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ymm238.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">kernel代码阅读生产力 -- vim plug、Cscope</h1><div class=post-meta><span title='2025-03-13 09:40:28 +0000 +0000'>March 13, 2025</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;2557 words&nbsp;·&nbsp;ymm</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#安装vim-plug>安装vim-plug</a></li><li><a href=#配置vim-plug>配置vim-plug</a><ul><li><a href=#插件安装>插件安装</a></li><li><a href=#插件更新>插件更新</a></li><li><a href=#插件删除>插件删除</a></li><li><a href=#其他命令>其他命令</a></li></ul></li><li><a href=#常用vim插件清单>常用Vim插件清单</a><ul><li><a href=#1-文件导航与管理>1. 文件导航与管理</a></li><li><a href=#2-界面美化>2. 界面美化</a></li><li><a href=#3-代码编辑增强>3. 代码编辑增强</a></li><li><a href=#4-git-集成>4. Git 集成</a></li><li><a href=#vim-plug一般配置>vim plug一般配置</a></li></ul></li><li><a href=#cscope>Cscope</a><ul><li><a href=#cscope安装>Cscope安装</a></li><li><a href=#生成代码数据库>​生成代码数据库</a></li><li><a href=#vim-集成配置>​Vim 集成配置</a></li><li><a href=#基本用法>基本用法</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>  Vim 是一个Linux上功能强大的文本编辑器，通过安装插件，你可以将Vim打造成一个功能齐全的IDE。vim-plug 是一个轻量级且易于使用的插件管理器，能够帮助用户轻松安装、更新和删除插件。本文将介绍如何在Linux系统上安装和使用 vim-plug 来管理你的 Vim 插件。本人vim配置可见<a href=https://github.com/ymm238/vimrc>vimrc</a>。使用vim相关插件配合Cscope看内核代码将流畅起飞！</p><h2 id=安装vim-plug>安装vim-plug<a hidden class=anchor aria-hidden=true href=#安装vim-plug>#</a></h2><p>对于Linux/Macos系统执行以下命令本地安装vim-plug插件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -fLo ~/.vim/autoload/plug.vim --create-dirs <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</span></span></code></pre></div><h2 id=配置vim-plug>配置vim-plug<a hidden class=anchor aria-hidden=true href=#配置vim-plug>#</a></h2><p>安装完成后，你需要在.vimrc文件中配置vim-plug。打开~/.vimrc，通过如下方式配置可用插件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>call</span> <span class=nx>plug</span>#<span class=nx>begin</span><span class=p>(</span><span class=s1>&#39;~/.vim/plugged&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c>    &#34; 在这里添加你的插件</span>
</span></span><span class=line><span class=cl><span class=c>    &#34; 例如：</span>
</span></span><span class=line><span class=cl>    <span class=nx>Plug</span> <span class=s1>&#39;scrooloose/nerdtree&#39;</span>  <span class=c>&#34; 文件浏览器</span>
</span></span><span class=line><span class=cl>    <span class=nx>Plug</span> <span class=s1>&#39;tpope/vim-fugitive&#39;</span>   <span class=c>&#34; Git 集成</span>
</span></span><span class=line><span class=cl>    <span class=nx>Plug</span> <span class=s1>&#39;vim-airline/vim-airline&#39;</span>  <span class=c>&#34; 状态栏美化</span>
</span></span><span class=line><span class=cl><span class=nx>call</span> <span class=nx>plug</span>#<span class=nx>end</span><span class=p>()</span>
</span></span></code></pre></div><ul><li>call plug#begin(&rsquo;~/.vim/plugged&rsquo;)：指定插件安装的目录。</li><li>Plug &lsquo;插件作者/插件名&rsquo;：添加你想要的插件。你可以在<a href=https://vimawesome.com/>Vim Awesome</a>上找到许多流行的插件。</li><li>call plug#end()：当前环境所使用的插件列表的结束标志。</li><li>&ldquo;：vim配置文件中使用单个双引号表示注释。</li></ul><h3 id=插件安装>插件安装<a hidden class=anchor aria-hidden=true href=#插件安装>#</a></h3><p>保存.vimrc文件后，重新启动Vim并运行以下命令来安装插件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=p>:</span><span class=nx>PlugInstall</span>
</span></span></code></pre></div><p>该命令将自动下载并安装你在.vimrc中配置的所有插件。</p><blockquote><p>插件需要从github下载，有的时候可能因为网络原因导致下载失败。</p></blockquote><h3 id=插件更新>插件更新<a hidden class=anchor aria-hidden=true href=#插件更新>#</a></h3><p>以下命令更新已安装的插件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=p>:</span><span class=nx>PlugUpdate</span>
</span></span></code></pre></div><h3 id=插件删除>插件删除<a hidden class=anchor aria-hidden=true href=#插件删除>#</a></h3><p>如果你想删除某个插件，只需从.vimrc中移除相应的Plug行，然后运行以下命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=p>:</span><span class=nx>PlugClean</span>
</span></span></code></pre></div><h3 id=其他命令>其他命令<a hidden class=anchor aria-hidden=true href=#其他命令>#</a></h3><ul><li>:PlugStatus：查看插件的安装状态。</li><li>:PlugUpgrade：升级 vim-plug 本身。</li></ul><h2 id=常用vim插件清单>常用Vim插件清单<a hidden class=anchor aria-hidden=true href=#常用vim插件清单>#</a></h2><h3 id=1-文件导航与管理>1. 文件导航与管理<a hidden class=anchor aria-hidden=true href=#1-文件导航与管理>#</a></h3><ul><li>​NERDTree<ul><li>功能：侧边栏文件浏览器，支持目录树和文件操作。</li><li>仓库：preservim/nerdtree</li><li>配置实例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;preservim/nerdtree&#39;</span>
</span></span><span class=line><span class=cl><span class=c>&#34; 快捷键：F7 打开/关闭 NERDTree （可随个人习惯配置）</span>
</span></span><span class=line><span class=cl><span class=k>map</span> <span class=p>&lt;</span><span class=nx>F7</span><span class=p>&gt;</span> :<span class=nx>NERDTreeToggle</span> <span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span>
</span></span></code></pre></div><ul><li>tagbar<ul><li>功能：在侧边栏展示当前文件的代码结构（如函数、类、变量等）。</li><li>仓库：preservim/tagbar</li><li>配置实例</li></ul></li></ul><p>Tagbar依赖ctags工具，执行以下命令<code>apt install universal-ctags/yum install ctags</code>安装ctag</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;preservim/tagbar&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>F8</span><span class=p>&gt;</span> :<span class=nx>TagbarToggle</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34; 自动聚焦到 Tagbar 窗口</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>tagbar_autofocus</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34; 自动更新标签（文件保存时）</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>tagbar_autoupdate</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34; 窗口宽度</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>tagbar_width</span> <span class=p>=</span> <span class=m>30</span>
</span></span></code></pre></div><ul><li>CtrlP<ul><li>功能：快速定位文件、缓冲区（Buffer）、最近打开的文件（MRU）或目录。</li><li>仓库：ctrlpvim/ctrlp.vim</li><li>配置实例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;ctrlpvim/ctrlp.vim&#39;</span>
</span></span></code></pre></div><h3 id=2-界面美化>2. 界面美化<a hidden class=anchor aria-hidden=true href=#2-界面美化>#</a></h3><ul><li>vim-airline<ul><li>功能：状态栏美化，显示模式、文件信息、Git 状态等。</li><li>仓库：vim-airline/vim-airline</li><li>搭配：可安装主题插件如 vim-airline-themes。</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;vim-airline/vim-airline&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;vim-airline/vim-airline-themes&#39;</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>airline</span>#<span class=nx>extensions</span>#<span class=nx>tabline</span>#<span class=nx>enabled</span> <span class=p>=</span> <span class=m>1</span>       <span class=c>&#34; 启用顶部缓冲区标签栏</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>airline</span>#<span class=nx>extensions</span>#<span class=nx>tabline</span>#<span class=nx>formatter</span> <span class=p>=</span> <span class=s1>&#39;unique_tail&#39;</span>  <span class=c>&#34; 标签命名格式</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>airline</span>#<span class=nx>extensions</span>#<span class=nx>tabline</span>#<span class=nx>buffer_nr_show</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>airline_theme</span> <span class=p>=</span> <span class=s1>&#39;gruvbox&#39;</span>  <span class=c>&#34; 主题名称</span>
</span></span></code></pre></div><ul><li>gruvbox<ul><li>功能：经典复古配色方案，护眼且高对比度。</li><li>仓库：morhetz/gruvbox</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;morhetz/gruvbox&#39;</span>
</span></span><span class=line><span class=cl><span class=k>colorscheme</span> <span class=nx>gruvbox</span>  <span class=c>&#34; 在 .vimrc 中设置主题</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>background</span><span class=p>=</span><span class=nb>dark</span>  <span class=c>&#34; 或 light</span>
</span></span></code></pre></div><h3 id=3-代码编辑增强>3. 代码编辑增强<a hidden class=anchor aria-hidden=true href=#3-代码编辑增强>#</a></h3><ul><li>vim-polyglot<ul><li>功能：支持 100+ 语言的语法高亮和缩进规则。</li><li>仓库：sheerun/vim-polyglot</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;sheerun/vim-polyglot&#39;</span>
</span></span></code></pre></div><ul><li>​auto-pairs<ul><li>功能：自动补全括号、引号等符号。</li><li>仓库：jiangmiao/auto-pairs</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;jiangmiao/auto-pairs&#39;</span>
</span></span></code></pre></div><ul><li>​nerdcommenter<ul><li>功能：快速注释/取消注释代码块。</li><li>仓库：preservim/nerdcommenter</li><li>快捷键：默认 Ctrl+/（需自定义）。</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;preservim/nerdcommenter&#39;</span>
</span></span><span class=line><span class=cl><span class=k>map</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>_</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;</span><span class=nx>NERDCommenterToggle</span>  <span class=c>&#34; Ctrl+/ 切换注释</span>
</span></span></code></pre></div><h3 id=4-git-集成>4. Git 集成<a hidden class=anchor aria-hidden=true href=#4-git-集成>#</a></h3><ul><li>vim-fugitive<ul><li>功能：Git 命令集成（提交、分支管理、diff 等）。</li><li>仓库：tpope/vim-fugitive</li><li>快捷键：:G status、:G commit 等。</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;tpope/vim-fugitive&#39;</span>
</span></span></code></pre></div><ul><li><p>vim-gitgutter</p></li><li><p>功能：在行号旁显示 Git 变更状态（增/删/改）。</p><ul><li>仓库：airblade/vim-gitgutter</li><li>配置示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;airblade/vim-gitgutter&#39;</span>
</span></span></code></pre></div><blockquote><p>目前本人主要使用vim阅读内核代码，开发使用的其他IDE，所以未添加LSP相关插件</p></blockquote><h3 id=vim-plug一般配置>vim plug一般配置<a hidden class=anchor aria-hidden=true href=#vim-plug一般配置>#</a></h3><p>vim plug一般配置如下</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=k>set</span> <span class=nx>nocompatible</span>                <span class=c>&#34;vim比vi支持更多的功能，如showcmd，避免冲突和副作用，最好关闭兼容</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>encoding</span><span class=p>=</span><span class=nx>utf</span><span class=m>-8</span>              <span class=c>&#34;使用utf-8编码</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>number</span>                      <span class=c>&#34;显示行号</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>showcmd</span>                     <span class=c>&#34;显示输入命令</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>cursorline</span>                  <span class=c>&#34;显示当前行</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>hlsearch</span>                    <span class=c>&#34;显示高亮搜索</span>
</span></span><span class=line><span class=cl><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>F4</span><span class=p>&gt;</span> :<span class=nx>nohlsearch</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span>   <span class=c>&#34;按 F4 键取消高亮显示</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>incsearch</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>history</span><span class=p>=</span><span class=m>100</span>                 <span class=c>&#34;默认指令记录是20</span>
</span></span><span class=line><span class=cl><span class=c>&#34;set ruler                      &#34;显示行号和列号（默认打开）</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>pastetoggle</span><span class=p>=&lt;</span><span class=nx>F3</span><span class=p>&gt;</span>            <span class=c>&#34;F3快捷键于paste模式与否之间转化，防止自动缩进</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>helplang</span><span class=p>=</span><span class=nx>cn</span>                 <span class=c>&#34;设置为中文帮助文档,需下载并配置之后才生效</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>tabstop</span><span class=p>=</span><span class=m>4</span>                   <span class=c>&#34;设置tab长度为4</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>shiftwidth</span><span class=p>=</span><span class=m>4</span>                <span class=c>&#34;设置自动对齐的缩进级别</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>cindent</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>smartindent</span>                 <span class=c>&#34;改进版的cindent,自动识别以#开头的注释，不进行换行</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>autoindent</span>                  <span class=c>&#34;autoindent配合下面一条命令根据不同语言类型进行不同的缩进操</span>
</span></span><span class=line><span class=cl><span class=k>filetype</span> <span class=nx>plugin</span> <span class=nx>indent</span> <span class=nx>on</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nx>nowrap</span>
</span></span></code></pre></div><h2 id=cscope>Cscope<a hidden class=anchor aria-hidden=true href=#cscope>#</a></h2><p>Cscope 是一款专注于C/C++代码的静态分析工具，提供高效的代码导航功能（如查找函数定义、调用关系、符号引用等）。它通过生成代码数据库，支持快速检索大型项目中的代码结构，尤其适合 Linux 内核等复杂项目。与ctags相比，Cscope 支持更丰富的查询类型，且能与Vim等编辑器深度集成。</p><ul><li>​核心优势：<ul><li>支持多种代码检索模式（函数定义、调用关系、符号出现位置等）。</li><li>高效处理大型代码库（如 Linux 内核）。</li><li>与编辑器无缝集成，提升代码阅读效率。</li></ul></li></ul><h3 id=cscope安装>Cscope安装<a hidden class=anchor aria-hidden=true href=#cscope安装>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Debian/Ubuntu</span>
</span></span><span class=line><span class=cl>sudo apt install cscope
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CentOS/RHEL</span>
</span></span><span class=line><span class=cl>sudo yum install cscope
</span></span></code></pre></div><h3 id=生成代码数据库>​生成代码数据库<a hidden class=anchor aria-hidden=true href=#生成代码数据库>#</a></h3><ol><li>生成文件列表
进入项目根目录，生成包含所有代码文件的列表（支持递归子目录）：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 递归查找 C/C++/头文件</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.c&#34;</span> -o -name <span class=s2>&#34;*.cpp&#34;</span> -o -name <span class=s2>&#34;*.h&#34;</span> &gt; cscope.files
</span></span></code></pre></div><p>​2. 生成数据库
执行以下命令基于cscope.files生成数据库：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cscope -Rbq
</span></span><span class=line><span class=cl>-R：递归目录建立索引。
</span></span><span class=line><span class=cl>-b：仅生成数据库，不启动交互界面。
</span></span><span class=line><span class=cl>-q：生成加速索引（大项目必备）。
</span></span></code></pre></div><p>生成的文件：</p><ul><li>cscope.out：主数据库。</li><li>cscope.in.out 和 cscope.po.out：加速索引文件。</li></ul><h3 id=vim-集成配置>​Vim 集成配置<a hidden class=anchor aria-hidden=true href=#vim-集成配置>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=c>&#34; 自动加载数据库</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>filereadable</span><span class=p>(</span><span class=s2>&#34;cscope.out&#34;</span><span class=p>)</span> &amp;&amp; <span class=p>!</span><span class=nx>cscope_connection</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nx>cs</span> <span class=nx>add</span> <span class=nx>cscope</span>.<span class=nx>out</span>
</span></span><span class=line><span class=cl><span class=k>endif</span>
</span></span></code></pre></div><h3 id=基本用法>基本用法<a hidden class=anchor aria-hidden=true href=#基本用法>#</a></h3><p>vim中执行<code>:cs help</code>命令查看Cscope的基本用法。Cscope常用查询命令如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=p>:</span><span class=nx>cs</span> <span class=nx>f</span> <span class=p>&lt;</span><span class=nx>query_type</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>symbol</span><span class=p>&gt;</span>
</span></span></code></pre></div><table><thead><tr><th>query_type</th><th>说明</th></tr></thead><tbody><tr><td>s</td><td>查找符号symbol出现位置</td></tr><tr><td>g</td><td>查找定义位置</td></tr><tr><td>c</td><td>查找调用该函数的位置</td></tr><tr><td>t</td><td>查找文本字符串</td></tr></tbody></table><p>  由于函数调用层级深，且宏和头文件嵌套复杂，Cscope可以快速且精准导航，直达关键逻辑，通过调用链和符号引用，理清代码依赖关系。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ymm238.github.io/tags/c/>C</a></li></ul><nav class=paginav><a class=prev href=https://ymm238.github.io/posts/mmu/><span class=title>«</span><br><span>MMU、TLB 和页表：核心概念解析</span>
</a><a class=next href=https://ymm238.github.io/posts/shift_operator/><span class=title>»</span><br><span>C语言运算符优先级及注意事项</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://ymm238.github.io/>Ymm's 博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>